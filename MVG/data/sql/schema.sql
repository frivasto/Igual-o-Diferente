CREATE TABLE bonificacion (id INT UNIQUE AUTO_INCREMENT, token VARCHAR(255) NOT NULL, mesa_id INT, jugador_id INT, descripcion VARCHAR(255), fecha DATETIME NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX mesa_id_idx (mesa_id), INDEX jugador_id_idx (jugador_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE decision (id INT UNIQUE AUTO_INCREMENT, token VARCHAR(255) NOT NULL, relacionmesavideo_id INT, tiempo TIME, respuesta TINYINT DEFAULT -1, eliminado TINYINT(1) DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX relacionmesavideo_id_idx (relacionmesavideo_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE etiqueta (id INT UNIQUE AUTO_INCREMENT, token VARCHAR(255) NOT NULL, texto VARCHAR(255), ponderacion INT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE instancia_etiqueta (id INT UNIQUE AUTO_INCREMENT, token VARCHAR(255) NOT NULL, relacionmesavideo_id INT, texto VARCHAR(255), tiempo TIME, eliminado TINYINT(1) DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX relacionmesavideo_id_idx (relacionmesavideo_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE intervalo (id INT UNIQUE AUTO_INCREMENT, token VARCHAR(255) NOT NULL, video_id INT, inicio TIME, fin TIME, eliminado TINYINT(1) DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX video_id_idx (video_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE jugador (id INT UNIQUE AUTO_INCREMENT, token VARCHAR(255) NOT NULL, user_id VARCHAR(255) NOT NULL UNIQUE, nombre VARCHAR(255), eliminado TINYINT(1) DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE mesa (id INT UNIQUE AUTO_INCREMENT, token VARCHAR(255) NOT NULL, jugador1_id INT, jugador2_id INT, tiempo_emparejar INT, estado TINYINT, eliminado TINYINT(1) DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE puntaje (id INT UNIQUE AUTO_INCREMENT, token VARCHAR(255) NOT NULL, mesa_id INT, jugador_id INT, puntaje INT DEFAULT 0, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX mesa_id_idx (mesa_id), INDEX jugador_id_idx (jugador_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE relacion_mesa_video (id INT UNIQUE AUTO_INCREMENT, token VARCHAR(255) NOT NULL, mesa_id INT, jugador_id INT, num_round INT, intervalo_id INT, respuesta_real TINYINT DEFAULT -1, eliminado TINYINT(1) DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX mesa_id_idx (mesa_id), INDEX jugador_id_idx (jugador_id), INDEX intervalo_id_idx (intervalo_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE video (id INT UNIQUE AUTO_INCREMENT, token VARCHAR(255) NOT NULL, url VARCHAR(255) NOT NULL, nombre VARCHAR(255), categoria VARCHAR(255), eliminado TINYINT(1) DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE bonificacion ADD CONSTRAINT bonificacion_mesa_id_mesa_id FOREIGN KEY (mesa_id) REFERENCES mesa(id);
ALTER TABLE bonificacion ADD CONSTRAINT bonificacion_jugador_id_jugador_id FOREIGN KEY (jugador_id) REFERENCES jugador(id);
ALTER TABLE decision ADD CONSTRAINT decision_relacionmesavideo_id_relacion_mesa_video_id FOREIGN KEY (relacionmesavideo_id) REFERENCES relacion_mesa_video(id);
ALTER TABLE instancia_etiqueta ADD CONSTRAINT instancia_etiqueta_relacionmesavideo_id_relacion_mesa_video_id FOREIGN KEY (relacionmesavideo_id) REFERENCES relacion_mesa_video(id);
ALTER TABLE intervalo ADD CONSTRAINT intervalo_video_id_video_id FOREIGN KEY (video_id) REFERENCES video(id);
ALTER TABLE puntaje ADD CONSTRAINT puntaje_mesa_id_mesa_id FOREIGN KEY (mesa_id) REFERENCES mesa(id);
ALTER TABLE puntaje ADD CONSTRAINT puntaje_jugador_id_jugador_id FOREIGN KEY (jugador_id) REFERENCES jugador(id);
ALTER TABLE relacion_mesa_video ADD CONSTRAINT relacion_mesa_video_mesa_id_mesa_id FOREIGN KEY (mesa_id) REFERENCES mesa(id);
ALTER TABLE relacion_mesa_video ADD CONSTRAINT relacion_mesa_video_jugador_id_jugador_id FOREIGN KEY (jugador_id) REFERENCES jugador(id);
ALTER TABLE relacion_mesa_video ADD CONSTRAINT relacion_mesa_video_intervalo_id_intervalo_id FOREIGN KEY (intervalo_id) REFERENCES intervalo(id);
